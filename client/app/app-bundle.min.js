"use strict";angular.module("app",["ngRoute","ngAnimate","ui.bootstrap"]),function(n){function t(n,t,i,r){function f(){u.logoText="USER PORTAL";u.currentYear=(new Date).getFullYear();u.isSidebarClosed=!1;u.settingsLinkGroup=!1;u.defaultProfileImage=r.APP_CONFIG.DEFAULT_USER_IMG;u.currentUser=i.getCurrentUser();u.isAuthenticated=i.isAuthenticated();u.logout=function(){i.logout()};u.gotoTop=function(){r.anchorScroll("scrollTop")};t.innerWidth<768&&(u.isSidebarClosed=!0)}var u=this;u.toggleSidebar=function(){u.isSidebarClosed=u.isSidebarClosed?!1:!0};f();n.$on("$routeChangeStart",function(n,t){if(u.isAuthenticated=i.isAuthenticated(),i.isAuthenticated()||t.$$route.originalPath.indexOf("login")!=-1)u.currentUser=i.getCurrentUser();else{r.navigateTo("/login");return}if(t&&t.$$route&&t.$$route.originalPath){u.activateDashboardNav=u.activateSettingsNav=u.settingsLinkGroup=u.activateSampleSubNav=u.activateSample2SubNav=!1;switch(t.$$route.originalPath){case"/sample":u.activateSettingsNav=u.settingsLinkGroup=u.activateSampleSubNav=!0;break;case"/sample2":u.activateSettingsNav=u.settingsLinkGroup=u.activateSample2SubNav=!0;break;default:u.activateDashboardNav=!0}}})}n.run(["securityService",function(n){n.getCurrentUser()}]);n.controller("baseController",t);t.$inject=["$scope","$window","securityService","commonService"];n.animation(".ajs-fade-animation",function(){return{enter:function(n,t){return n.css("display","none"),n.fadeIn(500,t),function(){n.stop()}},leave:function(n,t){return n.fadeOut(500,t),function(){n.stop()}}}})}(angular.module("app"));angular.module("app").constant("APP_CONFIG",{DEFAULT_USER_IMG:"content/img/avatar.jpg"}),function(){function n(n){n.when("/",{templateUrl:"app/views/dashboard/dashboard.tpl.html",controller:"dashboardController",controllerAs:"vm"}).when("/login",{templateUrl:"app/views/account/security/login/login.tpl.html",controller:"loginController",controllerAs:"vm"}).when("/profile",{templateUrl:"app/views/account/profile/profile.tpl.html",controller:"profileController",controllerAs:"vm"}).when("/sample",{templateUrl:"app/views/sample/sample.tpl.html"}).when("/sample2",{templateUrl:"app/views/sample/sample2.tpl.html"}).otherwise({redirectTo:"/"})}angular.module("app").config(["$routeProvider",n])}();angular.module("app").filter("cmdate",["$filter",function(n){return function(t,i){return n("date")(new Date(t),i)}}]),function(){function n(n,t,i,r,u,f,e){function h(n){r.path(n)}function c(n){i.location.href=n?n:s+r.$$path}function l(){i.history.back()}function a(n){r.hash(n);$scroll()}function v(n){var i=t.defer();return i.resolve(n),i.promise}function o(t,i,r,u){n.modalTitle=r;n.modalMessage=t;n.type=i;u=u?u:"";var e=f.open({scope:n,templateUrl:"/client/app/views/common/modalMessage/modalMessage.tpl.html",controller:"modalMessageCtrl",backdrop:"static",size:u})}function y(n){if(n){var t=n.statusText+" (Error Code: "+n.status+")";n.data!==null&&n.data.message!==null&&(t+="<br/><br/>"+n.data.message);o(t,"danger","Failure");console.log(t)}}function p(n,t){r.search(n,t)}function w(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(r.absUrl().replace("#",""));return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}var s="/#";return{APP_CONFIG:e,navigateTo:h,pageRedirect:c,goBack:l,anchorScroll:a,setDeferredPromise:v,showModalMessage:o,handleApiError:y,setQueryStringValue:p,getQueryStringValue:w}}angular.module("app").factory("commonService",n);n.$inject=["$rootScope","$q","$window","$location","$anchorScroll","$modal","APP_CONFIG"]}(),function(){function n(n,t){function u(){return n.get("test/sampleData/user.json").then(function(n){return i=n.data,r()&&t.navigateTo("#/"),r()},function(n){return t.handleApiError(n),!1})}function f(){i=null;t.navigateTo("/login")}function e(){return!0}function o(){if(r())return i}function r(){return!!i}var i=null;return{login:u,logout:f,sendPswdRecoveryEmail:e,getCurrentUser:o,isAuthenticated:r}}angular.module("app").factory("securityService",n);n.$inject=["$http","commonService"]}(),function(n){function t(n){function i(){t.user=n.getCurrentUser()}var t=this;i()}n.controller("profileController",t);t.$inject=["securityService"]}(angular.module("app")),function(n){function t(n,t,i){function r(){n.user={}}n.register=function(){n.dataLoading=!0;t.createUser(n.user)?(n.registerMsg="Your account has been created! You can now login.",n.registerMsgClass="alert-success"):(n.registerMsg="Registration failed. Please try again.",n.registerMsgClass="alert-danger",n.dataLoading=!1)};n.close=function(){i.close()};r()}n.controller("registerController",t);t.$inject=["$scope","registerService","$modalInstance"]}(angular.module("app")),function(){function n(){function n(n){if(n&&n.email&&n.password)return!0}return{createUser:n}}angular.module("app").factory("registerService",n);n.$inject=["$http","commonService"]}(),function(n){function t(n,t){function r(){$("#loginModal").modal("show");i.forgotPass={};i.user={email:"fake@myemail.com",password:"pa$$word"}}var i=this;i.login=function(){i.dataLoading=!0;n.login(i.user.email,i.user.password).then(function(n){n&&n.data&&$("#loginModal").modal("hide")},function(){i.loginMsg="Login failed. Please try again.";i.dataLoading=!1})};i.forgotPassword=function(){n.sendPswdRecoveryEmail(i.forgotPass.email)?(i.forgotPassMsg="A password recovery email has been sent.",i.forgotPassMsgClass="alert-success"):(i.forgotPassMsg="Form submission error. Please try again.",i.forgotPassMsgClass="alert-danger")};i.openRegister=function(){var n=t.open({templateUrl:"/client/app/views/account/register/register.tpl.html",controller:"registerController"})};r()}n.controller("loginController",t);t.$inject=["securityService","$modal"]}(angular.module("app")),function(n){function t(n,t){function i(){switch(n.type){case"warning":n.modalContentClass="alert-warning";n.modalHeaderClass="modal-header-warning";n.modalTitle||(n.modalTitle="Warning");break;case"danger":n.modalContentClass="alert-danger";n.modalHeaderClass="modal-header-danger";n.modalTitle||(n.modalTitle="Error");break;default:n.modalTitle||(n.modalTitle="Information")}}n.close=function(){t.close()};i()}n.controller("modalMessageCtrl",t);t.$inject=["$scope","$modalInstance"]}(angular.module("app")),function(n){function t(n,t){function r(){i.title="Welcome to the User Portal AngularJS Boilerplate!";i.user=t.getCurrentUser();n.getDashData(i.user.userId).then(function(n){i.dashData=n})}var i=this;r()}n.controller("dashboardController",t);t.$inject=["dashboardService","securityService"]}(angular.module("app")),function(){function n(n,t){function i(n){if(n&&n>0){var i={totalHits:25,totalShares:6};return t.setDeferredPromise(i)}}return{getDashData:i}}angular.module("app").factory("dashboardService",n);n.$inject=["$http","commonService"]}();